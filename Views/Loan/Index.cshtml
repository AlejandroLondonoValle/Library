@model Library.Models.Loan

<div class="container mt-5">
    <h2>Formulario</h2>
    <form asp-controller="Loan" asp-action="NewLoan" method="post" class="row g-3">

        <div class="col-md-6">
            <label for="idUser" class="form-label">ID Usuario</label>
            <input type="number" class="form-control" asp-for="@Model.IdUserId" id="idUser" name="idUser" required>
        </div>
        <div class="col-md-6">
            <label for="bookISBN" class="form-label">ISBN del Libro</label>
            <input type="text" class="form-control" asp-for="@Model.BookISBN" id="bookISBN" name="bookISBN" required>
        </div>
        <div class="col-md-6">
            <label for="startDate" class="form-label">Fecha de Inicio</label>
            <input type="datetime-local" class="form-control" asp-for="@Model.StartDate" id="startDate" name="startDate"
                min="" required>
        </div>
        <div class="col-md-6">
            <label for="finishDate" class="form-label">Fecha de Fin</label>
            <input type="date" class="form-control" asp-for="@Model.FinishDate" id="finishDate" name="finishDate" min=""
                required>
        </div>
        <div class="col-md-6">
            <label for="validationDefault04" class="form-label">Estado</label>
            <select class="form-select" asp-for="@Model.State" id="validationDefault04" required>
                <option selected disabled>Elige...</option>
                <option value="True">Disponible</option>
                <option value="False">Agotado</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Enviar</button>
    </form>
</div>


<script>
    // Establecer la fecha mínima para el campo FinishDate y la fecha máxima para el campo StartDate
    document.addEventListener('DOMContentLoaded', function () {
        const today = new Date().toISOString().split('T')[0]; // Fecha actual en formato YYYY-MM-DD

        // Establecer fecha mínima para el campo FinishDate
        document.getElementById('finishDate').setAttribute('min', today);

        // Establecer fecha máxima para el campo StartDate
        const startDateInput = document.getElementById('startDate');
        startDateInput.setAttribute('min', today + 'T00:00');

        // Actualizar la fecha mínima al cambiar el valor del campo FinishDate
        document.getElementById('finishDate').addEventListener('change', function () {
            const finishDate = new Date(this.value).toISOString().split('T')[0];
            startDateInput.setAttribute('max', finishDate + 'T23:59');
        });
    });
</script>
